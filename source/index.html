<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Test</title>
    <link rel="stylesheet" href="css/style.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">

    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous">
    </script>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>

  </head>
  <body>

    <header class="page-header">Hello world</header>
<!--     <button id="button">Delete selected row</button>
 -->    <button type="submit">Submit form</button>


    <table id="table_id" class="display" cellspacing="0" width="100%">
      <thead>
          <tr>
              <th>Column 1</th>
              <th>Column 2</th>
              <th>Column 3</th>
          </tr>
      </thead>
      <tbody>
          <tr class="row">
              <td>Row 1 Data 1</td>
              <td>Row 1 Data 2</td>
              <td>Row 1 Data 2</td>
          </tr>
      </tbody>
    </table>



  <!-- Скрипт для dblclick  по ячейке -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>

    <script src = "./js/dist/bindings/inputmask.binding.js"></script >

    <script>
      var table = $('#table_id').DataTable({
        "ajax":
              {
               "url": "data.json",
               "dataType": "json",
               "dataSrc": "data"
           },

         "columns": [
            { "data": "author.name" },
            { "data": "telephone.number" },
            { "data": "address.apartment" }
            ]
        });


      table.on( 'dblclick', 'tr td:nth-child(2)', function ( e, settings, json ) {
          console.log( 'Произошло событие Ajax. Возвращенные данные:', json );

          $( "#myForm" ).detach();
          $( ".dbl" ).removeClass();

          $(this).toggleClass( "dbl" );

          var valueForAttr = $(this).text();

          $(this).attr( "data-order", valueForAttr);

          $(this).append( "<form action='#' id='myForm'><input type='tel' id='telephone' class='telephone-example' name='phone' required pattern='^\+\d[-]\(\d{3}\)[-]\d{3}[-]\d{2}[-]\d{2}$'/><input class='form-submit' type='submit' value='Сохранить' /></form>" );

          // $(this).find( '#telephone' ).attr( "placeholder", valueForAttr);
          // $(this).find( '#telephone' ).attr( "value", valueForAttr);

          $(this).find('#telephone').attr( "data-inputmask", '99-9999999');



          // $('#telephone').inputmask("+9-(999)-999-99-99");


          $('.form-submit').click( function() {
            var data = table.$('input').serialize();
            alert(
                "Данные отправлены"
            );
            return false;
          });

      });
    </script>
  </body>
</html>
